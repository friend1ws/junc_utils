#! /usr/bin/env python

from junc_utils.run import *
import argparse

parser = argparse.ArgumentParser(prog = "junc_utils")

parser.add_argument("--version", action = "version", version = "junc_utils-0.1.0beta")

subparsers = parser.add_subparsers()

##########

# merge control
merge_control = subparsers.add_parser("merge_control",
                                      help = "merge, compress and index the splicing junction list (.SJ.out.tab file generated by STAR)")

merge_control.add_argument("junc_list", metavar = "junc_list.txt", default = None, type = str,
                           help = "junction path list")

merge_control.add_argument("output_path", default = None, type = str,
                           help = "the path of the output file")


merge_control.add_argument("--read_num_thres", type = int, default = 3,
                           help = "remove splicing junctions whose supporting numbers are below this value (default: %(default)s)")

merge_control.add_argument("--overhang_thres", type = int, default = 10,
                           help = "remove splicing junctions whose overhang sizes are this value (default: %(default)s)")

merge_control.add_argument("--keep_annotated", default = False, action = 'store_true', 
                           help = "do not remove annotated splicing junctions")

merge_control.set_defaults(func = merge_control_main)


##########

args = parser.parse_args()

args.func(args)


